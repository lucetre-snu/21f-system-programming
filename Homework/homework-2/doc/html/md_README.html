<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>System Programming: Homework 2 - Warming Up</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">System Programming
   &#160;<span id="projectnumber">Fall 2021</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Homework 2 - Warming Up </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this homework, you are going to</p><ul>
<li>learn the basic code editing cycle with Git</li>
<li>learn the basics of GNU make and</li>
<li>write a simple C program</li>
</ul>
<p>[[<em>TOC</em>]]</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Before you begin</h1>
<p>Always, <b>ALWAYS</b> start by forking a project (homework, lab) into your own private namespace! If you work on the original repository, all your changes will be visible to everyone.</p>
<p>To do so, hit the "Fork" button to the right of the project title, then select your namespace. Check that the visibility of your personal fork is set to <b>private</b> (Settings -&gt; General -&gt; Visibility). Do not share your repositories with anyone - this is considered cheating and will be penalized.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Introduction to Git</h1>
<p>If you are unfamiliar with Git, have a look at the <a class="el" href="md_INTRO_GIT.html">Introduction to Git</a>.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Introduction to GNU Make</h1>
<p>If you are unfamiliar with GNU Make, have a look at the <a class="el" href="md_INTRO_MAKE.html">Introduction to GNU Make</a>.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Your Task</h1>
<p>The handout includes a <code>Makefile</code> and a skeletton of a C file, <code>make.c</code>. A binary of the solution is provided in <code>hw2.reference</code> so that you can compare your code to ours.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Task 1</h2>
<p>Modify <code><a class="el" href="main_8c.html" title="main file">main.c</a></code> such that it prints all command line arguments as follows: </p><div class="fragment"><div class="line">$ ./hw2.reference hello there</div>
<div class="line">Command line arguments (3 total):</div>
<div class="line">   0: &#39;./hw2.reference&#39;</div>
<div class="line">   1: &#39;hello&#39;</div>
<div class="line">   2: &#39;there&#39;</div>
</div><!-- fragment --><p>The number of arguments is provided in <code>argc</code>, the arguments themselves in <code>argv[]</code> of main: </p><div class="fragment"><div class="line">...</div>
<div class="line">int <a class="code" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">...</div>
<div class="ttc" id="amain_8c_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdoc">program entry point</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00013">main.c:13</a></div></div>
</div><!-- fragment --><p>Add a loop after the first <code>TODO</code> in the code that first prints the string <code>Command line arguments (# total):</code> where # is replaced with the actual number of arguments. Then, add a loop (for or while) that runs through all arguments from <code>i=0...argc-1</code> and prints each argument <code>argv[i]</code>.</p>
<p>In the shell, compile your program using <code>make</code>. Stage the modified file and commit the solution to task 1 to your local Git repository.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Task 2</h2>
<p>In this second task, we want to add up all the numbers provided on the command line and print their sum. For example </p><div class="fragment"><div class="line">$ ./hw2.reference 2021 9 8</div>
<div class="line">Command line arguments (4 total):</div>
<div class="line">   0: &#39;./hw2.reference&#39;</div>
<div class="line">   1: &#39;2021&#39;</div>
<div class="line">   2: &#39;9&#39;</div>
<div class="line">   3: &#39;8&#39;</div>
<div class="line"> </div>
<div class="line">Sum of arguments: 2038.</div>
</div><!-- fragment --><p>You can assume that all arguments (except argument 0 which always contains the filename of the program) are integer numbers. No error checking is needed.</p>
<p>To convert a string to an integer, use the <code>atoi()</code> function. You can learn how to use <code>atoi()</code> from the man pages: <code>man atoi</code>.</p>
<p>Add a loop that goes from <code>i=1..argc-1</code> and adds up the integer value of each argument. At the end, print the sum.</p>
<p>In the shell, compile your program using <code>make</code>. Stage the modified file and commit the solution to task 2 to your local Git repository.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Task 3</h2>
<p>We want to implement the addition in our own custom math library. For that purpose, we define a header file and implement the corresponding C file.</p>
<p>The header file is given here, you can simply copy-paste it into <code><a class="el" href="mathlib_8h.html" title="math library header file">mathlib.h</a></code>: </p><div class="fragment"><div class="line"><span class="comment">//--------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// System Programming                     Homework #2                                    Fall 2021</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="mathlib_8c.html#aa99823a0fc8313c9c32541ce768fb801">add</a>(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b);</div>
<div class="ttc" id="amathlib_8c_html_aa99823a0fc8313c9c32541ce768fb801"><div class="ttname"><a href="mathlib_8c.html#aa99823a0fc8313c9c32541ce768fb801">add</a></div><div class="ttdeci">int add(int a, int b)</div><div class="ttdoc">returns the sum of two integer values</div><div class="ttdef"><b>Definition:</b> <a href="mathlib_8c_source.html#l00003">mathlib.c:3</a></div></div>
</div><!-- fragment --><p> In case you are wondering what the funny symbols in the comments are: these are <a href="https://www.doxygen.nl/manual/docblocks.html">Doxygen</a>-style comments. You can run <code>make doc</code> to generate HTML documentation for this homework. Use Firefox to browse the documentation (<code>firefox doc/html/index.html</code>).</p>
<p>Implement the function <code><a class="el" href="mathlib_8c.html#aa99823a0fc8313c9c32541ce768fb801" title="returns the sum of two integer values">add()</a></code> in <code><a class="el" href="mathlib_8c.html">mathlib.c</a></code>, then replace the addition (<code>+</code>) in <code><a class="el" href="main_8c.html" title="main file">main.c</a></code> with a call to <code><a class="el" href="mathlib_8c.html#aa99823a0fc8313c9c32541ce768fb801" title="returns the sum of two integer values">add()</a></code>. Do not forget to include the header file of our math library at the beginning of <code><a class="el" href="main_8c.html" title="main file">main.c</a></code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="mathlib_8h.html">mathlib.h</a>&quot;</span></div>
<div class="ttc" id="amathlib_8h_html"><div class="ttname"><a href="mathlib_8h.html">mathlib.h</a></div><div class="ttdoc">math library header file</div></div>
</div><!-- fragment --><p>Now compile your project first using <code>gcc</code> directly </p><div class="fragment"><div class="line">$ gcc -o hw2 main.c mathlib.c</div>
</div><!-- fragment --><p> If all is good you will see no compilation errors. If there are errors, fix them.</p>
<p>Next try to compile the project using make. First run <code>make mrproper</code> to clean all files, then compile: </p><div class="fragment"><div class="line">$ make mrproper</div>
<div class="line">rm -f main.o main.d</div>
<div class="line">rm -f hw2</div>
<div class="line">$ make</div>
<div class="line">set -e; rm -f main.d; gcc -std=c99 -Wall -O2 -MM main.c | sed &#39;s/\&zwj;(main\&zwj;)\.o[ :]*/\1.o main.d: /&#39; &gt; main.d</div>
<div class="line">gcc -std=c99 -Wall -O2   -c -o main.o main.c</div>
<div class="line">gcc -std=c99 -Wall -O2 -o hw2 main.o</div>
<div class="line">main.o: In function `main&#39;:</div>
<div class="line">main.c:(.text.startup+0x7): undefined reference to `add&#39;</div>
<div class="line">collect2: error: ld returned 1 exit status</div>
<div class="line">Makefile:70: recipe for target &#39;hw2&#39; failed</div>
<div class="line">make: *** [hw2] Error 1</div>
</div><!-- fragment --><p>The problem is that the Makefile does not contain a rule to compile <a class="el" href="mathlib_8c.html">mathlib.c</a>. Open the Makefile and inspect it. You need to add <code><a class="el" href="mathlib_8c.html">mathlib.c</a></code> in one location only to make the compilation process work: </p><div class="fragment"><div class="line">$ make </div>
<div class="line">set -e; rm -f mathlib.d; gcc -std=c99 -Wall -O2 -MM mathlib.c | sed &#39;s/\&zwj;(mathlib\&zwj;)\.o[ :]*/\1.o mathlib.d: /&#39; &gt; mathlib.d</div>
<div class="line">set -e; rm -f main.d; gcc -std=c99 -Wall -O2 -MM main.c | sed &#39;s/\&zwj;(main\&zwj;)\.o[ :]*/\1.o main.d: /&#39; &gt; main.d</div>
<div class="line">gcc -std=c99 -Wall -O2   -c -o main.o main.c</div>
<div class="line">gcc -std=c99 -Wall -O2   -c -o mathlib.o mathlib.c</div>
<div class="line">gcc -std=c99 -Wall -O2 -o hw2 main.o mathlib.o</div>
</div><!-- fragment --><p>Test your work, then stage the modified and new files and commit the solution to task 3 to your local Git repository.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Submission</h1>
<p>If you have committed your work as instructed at the end of tasks 1-3, you can submit your solution by pushing your commits to the Gitlab server: </p><div class="fragment"><div class="line">$ git push</div>
<div class="line">Counting objects: 4, done.</div>
<div class="line">Delta compression using up to 4 threads.</div>
<div class="line">Compressing objects: 100% (3/3), done.</div>
<div class="line">Writing objects: 100% (4/4), 379 bytes | 0 bytes/s, done.</div>
<div class="line">Total 4 (delta 2), reused 0 (delta 0)</div>
<div class="line">To https://teaching.csap.snu.ac.kr/yourname/homework-2.git</div>
<div class="line">   ec4fa12..ce69fec  main -&gt; main </div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
